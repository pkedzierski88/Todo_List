<%- include("partials/header.ejs") %>

<div id="container">
  <h1>Do Zrobienia:</h1>
  <form id="inputForm" action="/todos" method="POST">
    <input type="text" name="text" placeholder="Dodaj nowe zadanie" maxlength="30" autocomplete="off" autofocus="autofocus" required>
  </form>
  <ul>
    <% todos.forEach((todo) => { %> 
      <li>
        <% if(todo.isDone === true) { %>
          <form class="updateForm" action="/todos/<%= todo._id %>?_method=PUT" method="POST">
            <button class="updateButton"><i class="fas fa-check"></i></button>
          </form>
          <span class="completed"> <%= todo.text %></span>
        <% } else { %>
          <form class="updateForm" action="/todos/<%= todo._id %>?_method=PUT" method="POST">
            <button class="updateButton"><i class="far fa-circle"></i></button>
          </form>
          <span> <%= todo.text %></span>
        <% } %>
        <form style="float: right;" class="deleteForm" action="/todos/<%= todo._id %>?_method=DELETE" method="POST">
          <button class="deleteButton"><i class="fas fa-trash-alt"></i></button>
        </form>
      </li>
    <% }); %>
  </ul>
</div>

<%- include("partials/footer.ejs") %>